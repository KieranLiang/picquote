# 开gerの图片字幕生成器需求文档

## 1. 产品概述
开gerの图片字幕生成器是一个在线工具，用于在图片上添加多行字幕文字，并支持自定义字幕样式，最终生成带字幕的图片。特别设计了底部字幕的切割感效果，使每一行文字背景保持一致。

## 2. 功能需求

### 2.1 图片上传功能
- 支持用户上传本地图片文件
- 显示已上传图片的文件名
- 上传后在预览区域显示原图

### 2.2 字幕设置功能

#### 2.2.1 字幕样式设置
- **字幕高度**：可调节字幕区域的高度（单位：px）
- **字体大小**：可调节文字大小（单位：px）
- **字体颜色**：支持选择字体颜色（颜色选择器）
- **轮廓颜色**：支持选择文字轮廓颜色（颜色选择器）
- **字体样式**：下拉选择字体（如：系统默认、宋体、黑体等）
- **字体重粗**：下拉选择字重（如：正常、加粗、细体等）

#### 2.2.2 字幕内容输入
- 多行文本输入框，支持输入多行字幕内容
- 实时显示输入内容的行数

### 2.3 预览功能
- 实时预览生成效果
- 预览区域显示原图和叠加的字幕
- 字幕呈现切割感设计：底部每一行文字的背景颜色一致

### 2.4 保存功能
- **保存图片**按钮：点击后将当前预览的带字幕图片下载到本地

## 3. 界面设计

### 3.1 整体布局
- 左侧：控制面板（上传图片、字幕设置、内容输入）
- 右侧：预览区域

### 3.2 控制面板布局
- **上传图片区**：顶部，包含"选择图片"按钮和已上传文件名显示
- **字幕设置区**：中间，包含多个设置项，分两行两列布局
- **字幕内容区**：下方，包含多行文本输入框
- **操作按钮区**：底部，包含"生成字幕图片"和"保存图片"按钮

### 3.3 预览区域布局
- 顶部显示"预览"标题
- 中间显示图片预览，包含叠加的字幕
- 字幕呈现切割感：
  - 每一行文字背景颜色相同
  - 文字与背景之间有明确的分割线
  - 整体呈现整齐的切割效果

## 4. 技术实现要点

### 4.1 核心技术
- 使用HTML5 Canvas技术绘制图片和字幕
- 响应式设计，适配不同屏幕尺寸

### 4.2 字幕绘制逻辑
- 计算每行文字的位置和大小
- 绘制每行文字的背景矩形
- 绘制文字内容
- 实现切割感效果：确保每行文字背景高度一致

### 4.3 文件处理
- 图片上传与预览
- 生成图片的格式转换
- 文件下载功能

## 5. 非功能需求

### 5.1 性能需求
- 预览更新响应时间<1秒
- 图片生成时间<2秒

### 5.2 兼容性需求
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 支持常见图片格式（PNG、JPG、JPEG）

### 5.3 用户体验
- 界面简洁直观，操作便捷
- 实时反馈用户操作结果
- 提供清晰的错误提示

## 6. 界面元素详细规格

### 6.1 输入控件规格
- 数字输入框：宽度约100px，支持直接输入和上下调节
- 颜色选择器：方形按钮，显示当前选中颜色
- 下拉选择框：宽度约150px
- 文本输入框：高度约150px，支持多行输入
- 按钮：蓝色主按钮和灰色次要按钮

### 6.2 默认值设置
- 字幕高度：48px
- 字体大小：36px
- 字体颜色：#ffffff（白色）
- 轮廓颜色：#000000（黑色）
- 字体样式：系统默认
- 字体重粗：正常

## 7. 设计参考

### 7.1 切割感设计
底部字幕应呈现以下切割效果：
- 每一行文字拥有独立且高度一致的背景
- 背景颜色统一（如示例中的黑色）
- 文字居中或左对齐显示
- 行与行之间无明显间隙，形成整体切割效果

### 7.2 视觉层次
- 控制面板采用简洁白色背景
- 预览区域采用浅灰色背景
- 操作按钮使用蓝色突出显示
- 整体设计保持专业、易用的风格